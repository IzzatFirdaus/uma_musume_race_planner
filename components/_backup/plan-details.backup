<!-- components/plan-details.php -->
<div class="card mb-4" id="planDetails" role="region" aria-labelledby="planDetailsHeader" style="display: none;">
  <div class="card-header d-flex justify-content-between align-items-center" id="planDetailsHeader">
    <span><i class="bi bi-info-circle me-1" aria-hidden="true"></i> Plan Details</span>
    <button class="btn btn-sm btn-outline-secondary" id="closeDetailsBtn" aria-label="Close Plan Details">
      <i class="bi bi-x"></i>
    </button>
  </div>

  <div class="card-body">
    <div class="plan-details-content">

      <!-- Trainee & Metadata -->
      <div class="row mb-3" role="group" aria-labelledby="metaInfo">
        <div class="col-sm-6">
          <p><strong>Trainee Name:</strong> <span id="detailTraineeName"></span></p>
          <p><strong>Career Stage:</strong> <span id="detailCareerStage"></span></p>
          <p><strong>Class:</strong> <span id="detailClass"></span></p>
        </div>
        <div class="col-sm-6 text-sm-end">
          <p><strong>Created At:</strong> <span id="detailCreatedAt"></span></p>
          <p><strong>Last Updated:</strong> <span id="detailUpdatedAt"></span></p>
          <span class="badge" id="detailStatusBadge" aria-label="Plan Status"></span>
        </div>
      </div>

      <!-- Race Info -->
      <hr>
      <h5 id="raceInfoHeader">Race Information</h5>
      <div class="row mb-3">
        <div class="col-sm-6">
          <p><strong>Race Name:</strong> <span id="detailRaceName"></span></p>
          <p><strong>Turn Before Race:</strong> <span id="detailTurnBeforeRace"></span></p>
        </div>
        <div class="col-sm-6">
          <p><strong>Goal:</strong> <span id="detailGoal"></span></p>
          <p><strong>Strategy:</strong> <span id="detailStrategy"></span></p>
          <p><strong>Mood:</strong> <span id="detailMood"></span></p>
          <p><strong>Energy:</strong> <span id="detailEnergy"></span>%</p>
        </div>
      </div>

      <!-- Attributes -->
      <hr>
      <h5 id="attributesHeader">Attributes</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-sm" aria-describedby="attributesHeader">
          <thead>
            <tr>
              <th scope="col">Attribute</th>
              <th scope="col">Value</th>
              <th scope="col">Grade</th>
            </tr>
          </thead>
          <tbody id="detailAttributesBody"></tbody>
        </table>
      </div>

      <!-- Growth Rates -->
      <hr>
      <h5 id="growthRatesHeader">Growth Rates</h5>
      <div class="row mb-3" id="detailGrowthRates"></div>

      <!-- Skills -->
      <hr>
      <h5 id="skillsHeader">Skills</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-sm" aria-describedby="skillsHeader">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">SP Cost</th>
              <th scope="col">Acquired</th>
              <th scope="col">Notes</th>
              <th scope="col">Tag</th>
              <th scope="col">Type</th>
              <th scope="col">Best For</th>
            </tr>
          </thead>
          <tbody id="detailSkillsBody"></tbody>
        </table>
      </div>

      <!-- Suitability -->
      <hr>
      <h5 id="suitabilityHeader">Suitability Grades</h5>
      <div class="row" aria-labelledby="suitabilityHeader">
        <?php foreach (['Terrain', 'Distance', 'Style'] as $type): ?>
          <div class="col-sm-4 mb-3">
            <h6><?= $type ?></h6>
            <div class="table-responsive">
              <table class="table table-bordered table-sm" aria-label="<?= $type ?> Grades Table">
                <thead>
                  <tr>
                    <th scope="col">Type</th>
                    <th scope="col">Grade</th>
                  </tr>
                </thead>
                <tbody id="detail<?= $type ?>GradesBody"></tbody>
              </table>
            </div>
          </div>
        <?php endforeach; ?>
      </div>

      <!-- Race Predictions -->
      <hr>
      <h5 id="predictionsHeader">Race Predictions</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-sm" aria-describedby="predictionsHeader">
          <thead>
            <tr>
              <th scope="col">Race Name</th>
              <th scope="col">Venue</th>
              <th scope="col">Ground</th>
              <th scope="col">Distance</th>
              <th scope="col">Condition</th>
              <th scope="col">Direction</th>
              <th scope="col">Speed</th>
              <th scope="col">Stamina</th>
              <th scope="col">Power</th>
              <th scope="col">Guts</th>
              <th scope="col">Wit</th>
              <th scope="col">Comment</th>
            </tr>
          </thead>
          <tbody id="detailRacePredictionsBody"></tbody>
        </table>
      </div>

      <!-- Goals -->
      <hr>
      <h5 id="goalsHeader">Goals</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-sm" aria-describedby="goalsHeader">
          <thead>
            <tr>
              <th scope="col">Goal</th>
              <th scope="col">Result</th>
            </tr>
          </thead>
          <tbody id="detailGoalsBody"></tbody>
        </table>
      </div>

      <!-- Turns -->
      <hr>
      <h5 id="turnsHeader">Turns Data</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-sm" aria-describedby="turnsHeader">
          <thead>
            <tr>
              <th scope="col">Turn</th>
              <th scope="col">Speed</th>
              <th scope="col">Stamina</th>
              <th scope="col">Power</th>
              <th scope="col">Guts</th>
              <th scope="col">Wit</th>
            </tr>
          </thead>
          <tbody id="detailTurnsBody"></tbody>
        </table>
      </div>

      <!-- Actions -->
      <div class="text-end mt-4" aria-label="Plan Action Buttons">
        <button type="button" class="btn btn-primary me-2" id="editPlanBtn" aria-label="Edit This Plan">
          <i class="bi bi-pencil-square me-1"></i> Edit Plan
        </button>
        <button type="button" class="btn btn-secondary" id="printPlanBtn" aria-label="Print This Plan">
          <i class="bi bi-printer me-1"></i> Print
        </button>
      </div>

    </div>
  </div>
</div>
