<!-- components/modal-plan.php -->
<div class="modal fade" id="planModal" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-uma text-white">
        <h5 class="modal-title" id="modalTitle">Create New Plan</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close modal"></button>
      </div>

      <form id="planForm" role="form" aria-label="Full Plan Form">
        <div class="modal-body" id="planModalBody">
          <!-- ðŸ§© Dynamic sections populated by JS -->
          <section id="attributesContainer" aria-label="Attributes Section"></section>
          <section id="skillsContainer" aria-label="Skills Section"></section>
          <section id="terrainGradesContainer" aria-label="Terrain Grades Section"></section>
          <section id="distanceGradesContainer" aria-label="Distance Grades Section"></section>
          <section id="styleGradesContainer" aria-label="Style Grades Section"></section>
          <section id="racePredictionsContainer" aria-label="Race Predictions Section"></section>
          <section id="goalsContainer" aria-label="Goals Section"></section>
          <section id="turnsContainer" aria-label="Turns Section"></section>
        </div>

        <div class="modal-footer">
          <input type="hidden" name="id" id="planId" />
          <button type="submit" class="btn btn-uma" aria-label="Save Plan">
            <i class="bi bi-save me-1"></i> Save Plan
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Cancel">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Autosuggest: Skills -->
<datalist id="skillSuggestions">
<?php
try {
    require_once __DIR__ . '/../config.php';
    $pdo = require_once __DIR__ . '/../db.php';
    $stmt = $pdo->query('SELECT DISTINCT skill_name FROM skill_reference ORDER BY skill_name ASC');
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        echo '<option value="' . htmlspecialchars((string) $row['skill_name']) . '"></option>';
    }
} catch (Throwable $e) {
    error_log('Skill datalist load error: ' . $e->getMessage());
}
?>
</datalist>
